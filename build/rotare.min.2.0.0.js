/*! rotare - v2.0.0 - 2016-04-27 */!function($,w){function checkConf(conf){return!(conf&&conf.categoryOrigin&&0!=Object.keys(conf.categoryOrigin).length&&conf.animateTo&&Array.isArray(conf.animateTo))}function initConf(conf){var origin=conf.categoryOrigin[_keys[0]],symbol="pointer"==_keys[0]?"-":"+",_css={time:conf.time+"ms",easing:origin.easing,direction:"right"==origin.direction?"":"-"},css={transition:"all "+_css.time+" "+_css.easing,"-webkit-transition":"all "+_css.time+" "+_css.easing};if(1==conf._flag)"-"==symbol?_css.animateTo=parseInt(symbol+random(conf.animateTo,origin.direction,conf.random))+360*(origin.loops+5*_loop):_css.animateTo=random(conf.animateTo,origin.direction,conf.random)+360*(origin.loops+5*_loop),css.transform="rotate("+_css.direction+_css.animateTo+"deg)",css["-webkit-transform"]="rotate("+_css.direction+_css.animateTo+"deg)",goRotare&&goRotare([{selector:origin.selector,reset:conf.reset||!1,css:css}]);else{_css.animateTo=360*(origin.loops+5*_loop),css.transform="rotate("+_css.direction+_css.animateTo+"deg)",css["-webkit-transform"]="rotate("+_css.direction+_css.animateTo+"deg)";var origin_two=conf.categoryOrigin[_keys[1]],_css_two={time:conf.time+"ms",easing:origin_two.easing,direction:"right"==origin_two.direction?"":"-",animateTo:random(conf.animateTo,origin_two.direction,conf.random)+360*(origin_two.loops+5*_loop)},css_two={transform:"rotate("+_css_two.direction+_css_two.animateTo+"deg)","-webkit-transform":"rotate("+_css_two.direction+_css_two.animateTo+"deg)",transition:"all "+_css_two.time+" "+_css_two.easing,"-webkit-transition":"all "+_css_two.time+" "+_css_two.easing};goRotare&&goRotare([{selector:origin.selector,reset:conf.reset||!1,css:css},{selector:origin_two.selector,reset:conf.reset||!1,css:css_two}])}}function goRotare(arr){arr.forEach(function(item,index){$(item.selector).css(item.css).on("webkitTransitionEnd",function(ev){$(item.selector).off("webkitTransitionEnd"),_keys.length==index+1&&_callback&&_callback(),item.reset&&(_loop=-1,$(item.selector).attr("style",""))})})}var _loop=-1,_keys=null,_callback=null,rotare={VERSION:"2.0.0",start:function(conf,callback){if(checkConf(conf))console.error("参数初始化错误！");else{_loop++,_keys=Object.keys(conf.categoryOrigin).sort().reverse(),_callback=callback.bind(this);initConf&&initConf($.extend(conf,{_flag:_keys.length}))}}},random=function(source,direction,_random){var _source=[];if(source.length>1){var index=Math.floor(Math.random()*source.length);_source="right"==direction?source[index].map(function(item){return 360-item}):source[index].concat([])}else 1==source.length&&(_source="right"==direction?source[0].map(function(item){return 360-item}):source[0].concat([]));return _source.sort(function(item1,item2){return item1-item2}),Math.floor(_source[0]+_random[0]+Math.random()*(_source[1]-_random[1]-(_source[0]+_random[0])))};"function"==typeof define&&define.amd?define([],function(){return rotare}):"undefined"!=typeof module&&module.exports?module.exports=rotare:w.rotare=rotare}(window.Zepto||window.$,window);